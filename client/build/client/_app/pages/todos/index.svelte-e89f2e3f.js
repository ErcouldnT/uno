import{V as Q,S as ue,i as de,s as ce,e as g,k as U,c as b,a as I,m as N,d as y,b as n,W as ne,g as x,G as c,X as K,Y as fe,Z as he,_ as _e,$ as pe,a0 as oe,T as ve,t as me,K as ge,h as be,a1 as ke,p as ye,q as Te,o as Ee,n as qe,a2 as we,E as Me}from"../../chunks/index-f9b6a500.js";import{c as S}from"../../chunks/singletons-d1fb5791.js";function ie(i){const e=i-1;return e*e*e+1}S.disable_scroll_handling;S.goto;const Ue=S.invalidate;S.prefetch;S.prefetch_routes;S.before_navigate;S.after_navigate;function W(i,{pending:e,error:t,result:a}={}){let f;async function m(_){const s=f={};_.preventDefault();const u=new FormData(i);e&&e({data:u,form:i});try{const h=await fetch(i.action,{method:i.method,headers:{accept:"application/json"},body:u});if(s!==f)return;if(h.ok){a&&a({data:u,form:i,response:h});const l=new URL(i.action);l.search=l.hash="",Ue(l.href)}else t?t({data:u,form:i,error:null,response:h}):console.error(await h.text())}catch(h){if(t&&h instanceof Error)t({data:u,form:i,error:h,response:null});else throw h}}return i.addEventListener("submit",m),{destroy(){i.removeEventListener("submit",m)}}}function le(i,{delay:e=0,duration:t=400,easing:a=ie,start:f=0,opacity:m=0}={}){const _=getComputedStyle(i),s=+_.opacity,u=_.transform==="none"?"":_.transform,h=1-f,l=s*(1-m);return{delay:e,duration:t,easing:a,css:(q,T)=>`
			transform: ${u} scale(${1-h*T});
			opacity: ${s-l*T}
		`}}function Ne(i,{from:e,to:t},a={}){const f=getComputedStyle(i),m=f.transform==="none"?"":f.transform,[_,s]=f.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*_/t.width-(t.left+_),h=e.top+e.height*s/t.height-(t.top+s),{delay:l=0,duration:q=w=>Math.sqrt(w)*120,easing:T=ie}=a;return{delay:l,duration:Q(q)?q(Math.sqrt(u*u+h*h)):q,easing:T,css:(w,p)=>{const k=p*u,P=p*h,r=w+p*e.width/t.width,o=w+p*e.height/t.height;return`transform: ${m} translate(${k}px, ${P}px) scale(${r}, ${o});`}}}function se(i,e,t){const a=i.slice();return a[3]=e[t],a[4]=e,a[5]=t,a}function re(i,e){let t,a,f,m,_,s,u,h,l,q,T,w,p,k,P,r,o,d,$,C,A,O,D,H,X,F,V,j,Y,R,Z,z=Me,M,J,ee;function te(...E){return e[1](e[3],e[4],e[5],...E)}function ae(){return e[2](e[3],e[4],e[5])}return{key:i,first:null,c(){t=g("div"),a=g("form"),f=g("input"),_=U(),s=g("input"),h=U(),l=g("button"),w=U(),p=g("form"),k=g("input"),r=U(),o=g("input"),$=U(),C=g("button"),A=U(),O=g("form"),D=g("input"),X=U(),F=g("button"),Y=U(),this.h()},l(E){t=b(E,"DIV",{class:!0});var v=I(t);a=b(v,"FORM",{action:!0,method:!0});var B=I(a);f=b(B,"INPUT",{type:!0,name:!0,class:!0}),_=N(B),s=b(B,"INPUT",{type:!0,name:!0,class:!0}),h=N(B),l=b(B,"BUTTON",{class:!0,"aria-label":!0}),I(l).forEach(y),B.forEach(y),w=N(v),p=b(v,"FORM",{class:!0,action:!0,method:!0});var L=I(p);k=b(L,"INPUT",{type:!0,name:!0,class:!0}),r=N(L),o=b(L,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),$=N(L),C=b(L,"BUTTON",{class:!0,"aria-label":!0}),I(C).forEach(y),L.forEach(y),A=N(v),O=b(v,"FORM",{action:!0,method:!0});var G=I(O);D=b(G,"INPUT",{type:!0,name:!0,class:!0}),X=N(G),F=b(G,"BUTTON",{class:!0,"aria-label":!0}),I(F).forEach(y),G.forEach(y),Y=N(v),v.forEach(y),this.h()},h(){n(f,"type","hidden"),n(f,"name","uid"),f.value=m=e[3].uid,n(f,"class","svelte-q3kvo1"),n(s,"type","hidden"),n(s,"name","done"),s.value=u=e[3].done?"":"true",n(s,"class","svelte-q3kvo1"),n(l,"class","toggle svelte-q3kvo1"),n(l,"aria-label",q="Mark todo as "+(e[3].done?"not done":"done")),n(a,"action","/todos?_method=PATCH"),n(a,"method","post"),n(k,"type","hidden"),n(k,"name","uid"),k.value=P=e[3].uid,n(k,"class","svelte-q3kvo1"),n(o,"aria-label","Edit todo"),n(o,"type","text"),n(o,"name","text"),o.value=d=e[3].text,n(o,"class","svelte-q3kvo1"),n(C,"class","save svelte-q3kvo1"),n(C,"aria-label","Save todo"),n(p,"class","text svelte-q3kvo1"),n(p,"action","/todos?_method=PATCH"),n(p,"method","post"),n(D,"type","hidden"),n(D,"name","uid"),D.value=H=e[3].uid,n(D,"class","svelte-q3kvo1"),n(F,"class","delete svelte-q3kvo1"),n(F,"aria-label","Delete todo"),F.disabled=V=e[3].pending_delete,n(O,"action","/todos?_method=DELETE"),n(O,"method","post"),n(t,"class","todo svelte-q3kvo1"),ne(t,"done",e[3].done),this.first=t},m(E,v){x(E,t,v),c(t,a),c(a,f),c(a,_),c(a,s),c(a,h),c(a,l),c(t,w),c(t,p),c(p,k),c(p,r),c(p,o),c(p,$),c(p,C),c(t,A),c(t,O),c(O,D),c(O,X),c(O,F),c(t,Y),M=!0,J||(ee=[K(T=W.call(null,a,{pending:te})),K(W.call(null,p)),K(j=W.call(null,O,{pending:ae}))],J=!0)},p(E,v){e=E,(!M||v&1&&m!==(m=e[3].uid))&&(f.value=m),(!M||v&1&&u!==(u=e[3].done?"":"true"))&&(s.value=u),(!M||v&1&&q!==(q="Mark todo as "+(e[3].done?"not done":"done")))&&n(l,"aria-label",q),T&&Q(T.update)&&v&1&&T.update.call(null,{pending:te}),(!M||v&1&&P!==(P=e[3].uid))&&(k.value=P),(!M||v&1&&d!==(d=e[3].text)&&o.value!==d)&&(o.value=d),(!M||v&1&&H!==(H=e[3].uid))&&(D.value=H),(!M||v&1&&V!==(V=e[3].pending_delete))&&(F.disabled=V),j&&Q(j.update)&&v&1&&j.update.call(null,{pending:ae}),v&1&&ne(t,"done",e[3].done)},r(){Z=t.getBoundingClientRect()},f(){fe(t),z(),he(t,Z)},a(){z(),z=_e(t,Z,Ne,{duration:200})},i(E){M||(E&&pe(()=>{R||(R=oe(t,le,{start:.7},!0)),R.run(1)}),M=!0)},o(E){E&&(R||(R=oe(t,le,{start:.7},!1)),R.run(0)),M=!1},d(E){E&&y(t),E&&R&&R.end(),J=!1,ve(ee)}}}function Oe(i){let e,t,a,f,m,_,s,u,h,l=[],q=new Map,T,w,p,k=i[0];const P=r=>r[3].uid;for(let r=0;r<k.length;r+=1){let o=se(i,k,r),d=P(o);q.set(d,l[r]=re(d,o))}return{c(){e=g("meta"),t=U(),a=g("div"),f=g("h1"),m=me("Todos"),_=U(),s=g("form"),u=g("input"),h=U();for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){const o=ge('[data-svelte="svelte-aw2gey"]',document.head);e=b(o,"META",{name:!0,content:!0}),o.forEach(y),t=N(r),a=b(r,"DIV",{class:!0});var d=I(a);f=b(d,"H1",{});var $=I(f);m=be($,"Todos"),$.forEach(y),_=N(d),s=b(d,"FORM",{class:!0,action:!0,method:!0});var C=I(s);u=b(C,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),C.forEach(y),h=N(d);for(let A=0;A<l.length;A+=1)l[A].l(d);d.forEach(y),this.h()},h(){document.title="Todos",n(e,"name","description"),n(e,"content","A todo list app"),n(u,"name","text"),n(u,"aria-label","Add todo"),n(u,"placeholder","+ tap to add a todo"),n(u,"class","svelte-q3kvo1"),n(s,"class","new svelte-q3kvo1"),n(s,"action","/todos"),n(s,"method","post"),n(a,"class","todos svelte-q3kvo1")},m(r,o){c(document.head,e),x(r,t,o),x(r,a,o),c(a,f),c(f,m),c(a,_),c(a,s),c(s,u),c(a,h);for(let d=0;d<l.length;d+=1)l[d].m(a,null);T=!0,w||(p=K(W.call(null,s,{result:Ie})),w=!0)},p(r,[o]){if(o&1){k=r[0],qe();for(let d=0;d<l.length;d+=1)l[d].r();l=ke(l,o,P,1,r,k,q,a,we,re,null,se);for(let d=0;d<l.length;d+=1)l[d].a();ye()}},i(r){if(!T){for(let o=0;o<k.length;o+=1)Te(l[o]);T=!0}},o(r){for(let o=0;o<l.length;o+=1)Ee(l[o]);T=!1},d(r){y(e),r&&y(t),r&&y(a);for(let o=0;o<l.length;o+=1)l[o].d();w=!1,p()}}}const Ie=async({form:i})=>{i.reset()};function Pe(i,e,t){let{todos:a}=e;const f=(_,s,u,{data:h})=>{t(0,s[u].done=!!h.get("done"),a)},m=(_,s,u)=>t(0,s[u].pending_delete=!0,a);return i.$$set=_=>{"todos"in _&&t(0,a=_.todos)},[a,f,m]}class Fe extends ue{constructor(e){super(),de(this,e,Pe,Oe,ce,{todos:0})}}export{Fe as default};
